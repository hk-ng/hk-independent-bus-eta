"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{5461:function(h,c,a){a.r(c);var i=a(5893),j=a(7294),k=a(9520),l=a(7357),m=a(3321),d=a(4861),e=a(948),n=a(1567),f=a(9306),o=a.n(f),g=a(6841),p=a.n(g),q=a(8473),r=a(2970),s=a(6937);function t(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}c.default=function(a){var c=a.id,d=a.route,e=a.idx,f=void 0===e?-1:e,E=a.dest,A=a.stop,F=a.setIsCopied,B=a.event,g=(0,j.useState)(!1),h=g[0],G=g[1],t=(0,j.useContext)(r.Z),H=t.AppTitle,I=t.colorMode,w=(0,n.$)(),x=w.t,y=w.i18n,z=(0,j.useState)(""),b=z[0],J=z[1];(0,j.useEffect)(function(){!1!==h&&Promise.all([o().toPng(document.getElementById("route-eta-header"),{bgcolor:"light"===I?"#fedb00":"#000"}),document.getElementById("route-map")&&o().toPng(document.getElementById("route-map")),o().toPng(document.getElementById("stop-".concat(f))),]).then(function(a){return p()(a.filter(function(a){return a}).map(function(a){return a.substr(22)}),{direction:!0,isPng:!0})}).then(function(a){J(a)})},[h]),(0,j.useEffect)(function(){G(!0)},[B]);var C=(0,j.useCallback)(function(){var a,b;(0,q.I)("https://".concat(window.location.hostname,"/").concat(y.language,"/route/").concat(c),"".concat(f+1,". ").concat((0,q.iF)(null!==(a=A.name[y.language])&& void 0!==a?a:"")," - ").concat(d," ").concat(x("\u5F80")," ").concat((0,q.iF)(null!==(b=E[y.language])&& void 0!==b?b:"")," - ").concat(x(H))).then(function(){navigator.clipboard&&F(!0)}).finally(function(){G(!1)})},[q.I,y.language,c,f,A.name,d]),D=(0,j.useCallback)(function(){var a,e;(0,q.JP)(b,"https://".concat(window.location.hostname,"/").concat(y.language,"/route/").concat(c),"".concat(f+1,". ").concat((0,q.iF)(null!==(a=A.name[y.language])&& void 0!==a?a:"")," - ").concat(d," ").concat(x("\u5F80")," ").concat((0,q.iF)(null!==(e=E[y.language])&& void 0!==e?e:"")," - https://hkbus.app/")).then(function(){navigator.clipboard&&F(!0)}).finally(function(){G(!1)})},[q.JP,b,y.language,c,f,d]);return(0,i.jsx)(v,{className:u.root,onClose:function(){return G(!1)},open:h,children:(0,i.jsxs)(k.Z,{maxWidth:"xs",className:u.container,children:[b&&(0,i.jsxs)(l.Z,{className:u.boxContainer,children:[(0,i.jsx)("img",{src:b,style:{width:"100%"},alt:""}),(0,i.jsxs)(l.Z,{className:u.buttonContainer,children:[(0,i.jsx)(m.Z,{className:u.button,onClick:C,children:x("\u4EE5\u93C8\u7D50\u5206\u4EAB")}),(0,i.jsx)(m.Z,{className:u.button,onClick:D,children:x("\u4EE5\u5716\u7247\u5206\u4EAB")})]})]}),!b&&(0,i.jsx)(s.D,{color:"inherit"})]})})};var b="sharingModal",u={root:"".concat(b,"-root"),container:"".concat(b,"-container"),boxContainer:"".concat(b,"-boxContainer"),buttonContainer:"".concat(b,"-buttonContainer"),button:"".concat(b,"-button")},v=(0,e.ZP)(d.Z)(function(c){var a,b=c.theme;return t(a={},"&.".concat(u.root),{display:"flex",alignItems:"center"}),t(a,"& .".concat(u.container),{display:"flex",justifyContent:"center",outline:"none"}),t(a,"& .".concat(u.boxContainer),{display:"flex",flexDirection:"column",justifyContent:"center"}),t(a,"& .".concat(u.buttonContainer),{display:"flex",backgroundColor:"dark"===b.palette.mode?b.palette.background.default:"#fedb00"}),t(a,"& .".concat(u.button),{flex:1,border:"1px solid rgba(255, 255, 255, 0.3)",color:"dark"===b.palette.mode?b.palette.primary.main:b.palette.text.primary}),a})}}])