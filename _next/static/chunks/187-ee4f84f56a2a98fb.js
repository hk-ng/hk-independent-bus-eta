"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{1568:function(d,b,a){a.d(b,{e:function(){return m}});var c=a(4051),e=a.n(c),f=a(7294),g=a(1567),h=a(2970);function i(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function j(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function l(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}var m=function(m){var c,d,b,k,o=(0,f.useContext)(h.Z),r=o.db,s=o.isVisible,p=(b=m.split("/"),k=2,function(a){if(Array.isArray(a))return a}(b)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,k)||function(a,c){if(a){if("string"==typeof a)return i(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(a,c)}}(b,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=p[0],w=p[1],x=null!==(d=null===(c=r.routeList)|| void 0===c?void 0:c[t])&& void 0!==d?d:n,q=(0,f.useState)(null),u=q[0],y=q[1],v=(0,g.$)(),z=v.i18n.language;return(0,f.useEffect)(function(){var b,c,f=!0,d=(c=(b=e().mark(function b(){var c,d;return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s){b.next=3;break}return y(null),b.abrupt("return",[]);case 3:return b.next=5,a.e(80).then(a.t.bind(a,9080,23)).then(function(a){return a.fetchEtas});case 5:return c=b.sent,b.next=8,c(l({},x,{seq:parseInt(w,10),language:z}));case 8:d=b.sent,f&&y(d);case 10:case"end":return b.stop()}},b)}),function(){var a=this,c=arguments;return new Promise(function(e,f){var g=b.apply(a,c);function d(a){j(g,e,f,d,h,"next",a)}function h(a){j(g,e,f,d,h,"throw",a)}d(void 0)})}),function(){return c.apply(this,arguments)}),g=setInterval(function(){d()},3e4);return d(),function(){f=!1,clearInterval(g)}},[m,s]),u},n={co:[""],stops:{"":[""]},dest:{zh:"",en:""},bound:"",nlbId:0,gtfsId:"",fares:[],faresHoliday:[]}},4187:function(i,e,a){a.d(e,{Z:function(){return H}});var j=a(5893),k=a(7294),f=a(9953),l=a(5861),m=a(7357),n=a(1519),g=a(7212),o=a(7444),h=a(1664),p=a.n(h),q=a(1163),r=a(8473),c=a(948),s=a(2970),t=a(1567),u=a(1568);function v(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var w=function(d){var e=d.routeId,c=(0,t.$)(),f=c.t,g=c.i18n,h=(0,k.useContext)(s.Z).etaFormat,a=(0,u.e)(e),b=function(a){if(!a||!a.eta)return"";var b=Math.round((new Date(a.eta).getTime()-new Date().getTime())/60/1e3);if(!Number.isInteger(b))return a.remark[g.language];var c=a.eta.slice(11,16),d=b<1?"- ".concat(f("\u5206\u9418")):"".concat(b," ").concat(f("\u5206\u9418"));switch(h){case"exact":return c;case"diff":return d;default:return"".concat(c," (").concat(d,")")}};return(0,j.jsx)(y,{primary:(0,j.jsx)(l.Z,{component:"h5",color:"textPrimary",sx:{whiteSpace:"nowrap"},children:a?b(a[0]):""}),secondary:(0,j.jsxs)(l.Z,{variant:"h6",color:"textSecondary",className:x.secondary,children:[a?b(a[1]):"",(0,j.jsx)("br",{}),a?b(a[2]):""]}),className:x.root})},d="etas",x={root:"".concat(d,"-root"),secondary:"".concat(d,"-secondary")},y=(0,c.ZP)(f.Z)(function(b){var a;return b.theme,v(a={},"&.".concat(x.root),{textAlign:"right"}),v(a,"& .".concat(x.secondary),{fontSize:"0.875rem",fontWeight:"400",lineHeight:"1.43",whiteSpace:"nowrap",textAlign:"right"}),a}),z=a(2500);function A(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function B(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function C(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||D(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(a,c){if(a){if("string"==typeof a)return A(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return A(a,c)}}var E=function(a){var g=a.name,h=a.location,d=a.fares,e=a.faresHoliday,b=a.seq,l=(0,t.$)().t,i=(0,k.useContext)(s.Z),m=i.geoPermission,n=i.geolocation,o=d&&d[b]?"$"+d[b]:"",p=e&&e[b]?"$"+e[b]:"",c=[o,p].filter(function(a){return a}).join(", "),f=(0,r.Qi)(h,n),q=f.distance,u=f.unit,v=f.decimalPlace;return"granted"!==m||0===h.lat?(0,j.jsx)(j.Fragment,{children:g+"\u3000"+(c?"("+c+")":"")}):(0,j.jsx)(j.Fragment,{children:g+" - "+q.toFixed(v)+l(u)+"\u3000"+(c?"("+c+")":"")})},F={co:[""],stops:{"":[""]},dest:{zh:"",en:""},bound:"",nlbId:0,fares:[],faresHoliday:[]},G={location:{lat:0,lng:0},name:{zh:"",en:""}},H=function(v){var b,c,d,e,g,h=v.routeId,x=v.disabled,i=void 0!==x&&x,y=(0,t.$)(),P=y.t,u=y.i18n,A=(0,k.useContext)(s.Z),B=A.db,Q=A.vibrateDuration,R=C(h.split("-"),1),S=R[0],D=C(h.split("/"),2),H=D[0],M=D[1],a=null!==(d=null===(b=B.routeList)|| void 0===b?void 0:b[H])&& void 0!==d?d:F,T=a.co,U=a.stops,V=a.dest,W=a.fares,X=a.faresHoliday,N=null!==(e=null===(c=B.stopList)|| void 0===c?void 0:c[I(T,U)[parseInt(M,10)]])&& void 0!==e?e:G,Y=(0,q.useRouter)(),O="/".concat(u.language,"/route/").concat(H.toLowerCase()),Z=(0,k.useCallback)(function(a){a.preventDefault(),(0,r.tp)(Q),setTimeout(function(){Y.push(O)},0)},[O,Y,Q]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p(),{href:"/[locale]/route/[id]",as:O,children:(0,j.jsxs)(K,{className:J.listItem,disabled:i,onClick:i?void 0:Z,children:[(0,j.jsx)(f.Z,{primary:(0,j.jsx)(z.Z,{routeNo:S})}),(0,j.jsx)(f.Z,{primary:(0,j.jsxs)(l.Z,{component:"h3",variant:"body1",color:"textPrimary",className:J.fromToWrapper,children:[(0,j.jsx)("span",{className:J.fromToText,children:P("\u5F80")}),(0,j.jsx)("b",{children:(0,r.iF)(null!==(g=V[u.language])&& void 0!==g?g:"")})]}),secondary:(0,j.jsx)(E,{name:(0,r.iF)(N.name[u.language]),location:N.location,fares:W,faresHoliday:X,seq:parseInt(M,10)}),secondaryTypographyProps:{component:"h4",variant:"subtitle2"},className:J.routeDest}),i?(0,j.jsx)(m.Z,{sx:L,children:(0,j.jsx)(o.Z,{})}):(0,j.jsx)(w,{routeId:h})]})}),(0,j.jsx)(n.Z,{})]})},I=function(b,c){for(var a=0;a<b.length;++a)if(b[a]in c)return c[b[a]]},b="succinctTimeReport",J={listItem:"".concat(b,"-listItem"),route:"".concat(b,"-route"),routeDest:"".concat(b,"-routeDest"),fromToWrapper:"".concat(b,"-fromToWrapper"),fromToText:"".concat(b,"-fromToText")},K=(0,c.ZP)(g.ZP)(function(b){var a,c=b.theme;return B(a={display:"grid",gridTemplateColumns:"15% 1fr minmax(18%, max-content)"},"&.".concat(J.listItem),{padding:"4px 8px",color:"rgba(0,0,0,0.87)"}),B(a,"& .".concat(J.routeDest),{overflow:"hidden"}),B(a,"& .".concat(J.fromToWrapper),{display:"flex",alignItems:"baseline",fontSize:"1.2rem"}),B(a,"& .".concat(J.fromToText),{fontSize:"0.85rem",marginRight:c.spacing(.5)}),a}),L={color:function(a){return a.palette.text.primary},flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},2500:function(f,c,a){var g=a(5893);a(7294);var d=a(5861),e=a(948);function h(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}c.Z=function(c){var a,d,b=c.routeNo,f=c.component,i=c.align,e=(a=b.match(/[A-Z]+$/)?[b.slice(0,-1),b.slice(-1)]:[b,""],d=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,d)||function(a,c){if(a){if("string"==typeof a)return h(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return h(a,c)}}(a,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=e[0],m=e[1];return(0,g.jsxs)(k,{component:f||"h2",align:i,variant:"caption",color:"textPrimary",className:j.root,children:[(0,g.jsx)("span",{className:j.prefix,children:l}),(0,g.jsx)("span",{className:j.suffix,children:m})]})};var b="routeNo",j={root:"".concat(b,"-root"),prefix:"".concat(b,"-prefix"),suffix:"".concat(b,"-suffix")},k=(0,e.ZP)(d.Z)(function(b){var a;return b.theme,i(a={},"&.".concat(j.root),{lineHeight:"normal",display:"inline"}),i(a,"& .".concat(j.prefix),{fontSize:"1.5rem",fontFamily:'"Oswald", sans-serif'}),i(a,"& .".concat(j.suffix),{fontSize:"1.2rem",fontFamily:'"Oswald", sans-serif'}),a})}}])