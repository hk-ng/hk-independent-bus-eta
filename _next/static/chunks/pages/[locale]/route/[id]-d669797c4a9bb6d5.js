(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{5232:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/route/[id]",function(){return c(5827)}])},5827:function(p,e,a){"use strict";a.r(e),a.d(e,{"__N_SSG":function(){return aC},"default":function(){return aD}});var q=a(5893),r=a(7294),s=a(1163),g=a(5152),h=a.n(g),t=a(5113),u=a(5861),v=a(2500),w=a(8473),x=a(1567),y=a(1519),z=a(3321),A=a(512),B=a(2970),C=a(287);function D(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function E(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||F(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(a,c){if(a){if("string"==typeof a)return D(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return D(a,c)}}var G=function(c){var t,g=c.routeId,a=c.routeListEntry,d=(0,x.$)(),h=d.t,i=d.i18n,e=(0,r.useContext)(B.Z),b=e.db,j=e.vibrateDuration,k=a.route,l=a.stops,m=a.co,n=(0,s.useRouter)(),o=(0,r.useMemo)(function(){return(0,C.HD)(null!==(t=b.holidays)&& void 0!==t?t:[],new Date)},[b.holidays]),f=(0,r.useMemo)(function(){return void 0===b.routeList|| void 0===b.stopList?[]:Object.entries(b.routeList).reduce(function(a,f){var b,d=E(f,2),e=d[0],c=d[1];if(e===g)return a;var h=c.co,i=c.route;return i===k&&JSON.stringify(m)===JSON.stringify(h)?((function(a){if(Array.isArray(a))return D(a)})(b=a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(b)||F(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[e,c]]):a},[]).sort(function(g,h){var a=E(g,2)[1],c=E(h,2)[1],d=(0,C.x4)(a.route,a.freq,o),e=(0,C.x4)(c.route,c.freq,o);if(d===e){var f=b.stopList[Object.values(l)[0][0]],i=b.stopList[Object.values(a.stops)[0][0]],j=(0,w.Sp)(i.location,f.location),k=b.stopList[Object.values(c.stops)[0][0]];return j>(0,w.Sp)(k.location,f.location)?-1:1}return d>e?-1:1}).map(function(a){return E(a,1)[0]}).filter(function(a){return a.toLowerCase()!==g})},[b.routeList,b.stopList,g,k,m,o,l]),p=(0,r.useCallback)(function(a){a.preventDefault(),(0,w.tp)(j),setTimeout(function(){n.push("/".concat(i.language,"/route/").concat(f[0].toLowerCase()))},0)},[i.language,f,n,j]);return f.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y.Z,{orientation:"vertical",sx:H}),(0,q.jsx)(z.Z,{variant:"text","aria-label":"open-timetable",sx:I,size:"small",startIcon:(0,q.jsx)(A.Z,{}),onClick:p,children:h("\u5C0D\u982D\u7DDA")})]})},H={position:"absolute",top:"0",left:"calc(64px + 2%)"},I={color:function(a){return a.palette.getContrastText(a.palette.background.default)},position:"absolute",top:"0",left:"2%",flexDirection:"column",justifyContent:"center","& > .MuiButton-label":{flexDirection:"column",justifyContent:"center"},"& > .MuiButton-startIcon":{margin:0}},J=a(1943),K=a(7212),L=a(8462),i=a(7533),c=a(948);function M(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function N(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function O(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||P(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(a,c){if(a){if("string"==typeof a)return M(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return M(a,c)}}var Q={31:"\u661F\u671F\u4E00\u81F3\u4E94",287:"\u661F\u671F\u4E00\u81F3\u4E94",415:"\u661F\u671F\u4E00\u81F3\u4E94",63:"\u661F\u671F\u4E00\u81F3\u516D",319:"\u661F\u671F\u4E00\u81F3\u516D",447:"\u661F\u671F\u4E00\u81F3\u516D",416:"\u661F\u671F\u516D\u81F3\u65E5",480:"\u661F\u671F\u516D\u81F3\u65E5",266:"\u661F\u671F\u4E8C\u81F3\u56DB",271:"\u661F\u671F\u4E00\u81F3\u56DB",272:"\u661F\u671F\u4E94",288:"\u661F\u671F\u516D",320:"\u661F\u671F\u65E5\u53CA\u516C\u773E\u5047\u671F",448:"\u661F\u671F\u65E5\u53CA\u516C\u773E\u5047\u671F",511:"\u6240\u6709\u65E5\u5B50",111:"\u9664\u661F\u671F\u4E09\u5916"},R=function(a){var d=a.freq,c=a.jt,e=a.open,f=a.onClose,b=(0,x.$)().t,g=(0,r.useMemo)(function(){return Object.entries(d).map(function(d){var a=O(d,2),c=a[0],e=a[1];return(0,q.jsxs)(K.ZP,{className:S.entries,children:[(0,q.jsx)(u.Z,{variant:"subtitle1",children:b(Q[c])}),Object.entries(e).sort(function(a,b){return a[0]<b[0]?-1:1}).map(function(f){var d=O(f,2),e=d[0],a=d[1];return(0,q.jsxs)("div",{className:S.freqContainer,children:[(0,q.jsxs)(u.Z,{variant:"caption",children:[e," ",a?"-".concat(a[0]):""]}),a?(0,q.jsxs)(u.Z,{variant:"caption",children:[parseInt(a[1],10)/60,b("\u5206\u9418")]}):(0,q.jsx)(q.Fragment,{})]},"".concat(c,"-").concat(e))})]},"".concat(c))})},[d,b]),h=(0,r.useMemo)(function(){return{onClose:function(){f()}}},[f]),i=(0,r.useMemo)(function(){return{className:"timetable-drawer"}},[]);return(0,q.jsxs)(T,{open:e,ModalProps:h,PaperProps:i,anchor:"right",children:[c?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(K.ZP,{className:S.entries,children:(0,q.jsxs)("div",{className:S.jtContainer,children:[(0,q.jsx)(u.Z,{variant:"subtitle1",children:b("\u8ECA\u7A0B")}),(0,q.jsxs)(u.Z,{variant:"subtitle1",children:[Math.round(c),b("\u5206\u9418")]})]})}),(0,q.jsx)(y.Z,{className:S.divider})]}):null,(0,q.jsx)(L.Z,{children:g})]})},d="timetable",S={drawer:"".concat(d,"-drawer"),entries:"".concat(d,"-entries"),jtContainer:"".concat(d,"-jtContainer"),divider:"".concat(d,"-divider"),freqContainer:"".concat(d,"-freqContainer")},T=(0,c.ZP)(i.ZP)(function(c){var a,b=c.theme;return N(a={},"& .".concat(S.drawer),{height:"100vh",width:"80%",maxWidth:"320px",paddingTop:"56px",paddingLeft:"20px",backgroundColor:"dark"===b.palette.mode?b.palette.background.default:b.palette.primary.main,backgroundImage:"none"}),N(a,"& .".concat(S.jtContainer),{display:"flex",justifyContent:"space-between",width:"80%"}),N(a,"& .".concat(S.divider),{width:"80%"}),N(a,"& .".concat(S.entries),{flexDirection:"column",alignItems:"flex-start"}),N(a,"& .".concat(S.freqContainer),{display:"flex",justifyContent:"space-between",width:"80%"}),a}),U=function(d){var a=d.routeListEntry,b=(0,r.useState)(!1),e=b[0],h=b[1],f=(0,x.$)().t,c=a.freq,g=a.jt;return c&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y.Z,{orientation:"vertical",sx:V}),(0,q.jsx)(z.Z,{variant:"text","aria-label":"open-timetable",sx:W,size:"small",startIcon:(0,q.jsx)(J.Z,{}),onClick:function(){return h(!0)},children:f("\u6642\u9593\u8868")}),(0,q.jsx)(R,{freq:c,jt:g,open:e,onClose:function(){return h(!1)}})]})},V={position:"absolute",top:"0",right:"calc(64px + 2%)"},W={color:function(a){return a.palette.getContrastText(a.palette.background.default)},position:"absolute",top:"0",right:"2%",flexDirection:"column",justifyContent:"center","& > .MuiButton-label":{flexDirection:"column",justifyContent:"center"},"& > .MuiButton-startIcon":{margin:0}},X=function(d){var b,c,h=d.routeId,a=d.routeListEntry,e=(0,x.$)(),f=e.t,g=e.i18n,i=a.route,j=a.orig,k=a.dest,l=a.nlbId;return(0,q.jsxs)(t.Z,{id:"route-eta-header",sx:Y,elevation:0,children:[(0,q.jsx)(v.Z,{routeNo:i,component:"h1",align:"center"}),(0,q.jsxs)(u.Z,{component:"h2",variant:"caption",align:"center",children:[f("\u5F80")," ",(0,w.iF)(null!==(b=k[g.language])&& void 0!==b?b:"")," ",l?f("\u7531")+" "+(0,w.iF)(null!==(c=j[g.language])&& void 0!==c?c:""):""]}),(0,q.jsx)(G,{routeListEntry:a,routeId:h}),(0,q.jsx)(U,{routeListEntry:a})]})},Y={textAlign:"center",background:"transparent",position:"relative"},Z=a(3946),$=a(8665),j=a(7357),k=a(2280),l=a(8895),m=a(2797),n=a(684),_=a(5593),aa=a(4957),ab=a(3329),ac=a(8637),ad=a(1359);function ae(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var af=(0,n.ZP)(function(){return Promise.all([a.e(121),a.e(851),a.e(461)]).then(a.bind(a,5461))}),ag=function(a){var k=a.routeId,d=a.stopIdx,e=a.expanded,b=a.routeListEntry,l=a.stopListExtracted,m=a.handleChange,n=k,c=(0,r.useContext)(B.Z),o=c.savedEtas,p=c.updateSavedEtas,s=c.energyMode,f=(0,r.useState)(!1),t=f[0],F=f[1],g=(0,r.useState)(null),h=g[0],v=g[1],y=b.route,z=b.dest,A=b.fares,C=b.faresHoliday,i=(0,x.$)(),j=i.t,D=i.i18n,G=(0,r.useRef)([]);(0,r.useEffect)(function(){if(e&&G.current[d]){var a=setTimeout(function(){var a;null===(a=G.current[d])|| void 0===a||a.scrollIntoView({behavior:"smooth",block:"center"})},50);return function(){clearTimeout(a)}}},[e,d]);var E=(0,r.useMemo)(function(){return l.map(function(c,a){var b;return(0,q.jsxs)(aj,{id:"stop-".concat(a),expanded:d===a&&e,onChange:function(c,b){m(a,b)},TransitionProps:{unmountOnExit:!0},ref:function(c){var e,b;e=c,(null!=(b=HTMLElement)&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?!!b[Symbol.hasInstance](e):e instanceof b)&&(G.current[a]=c,d===a&&c.scrollIntoView({behavior:"smooth",block:"nearest"}))},classes:{root:ah.accordionRoot,expanded:ah.accordionExpanded},children:[(0,q.jsxs)(ak,{classes:{root:ah.accordionSummaryRoot,content:ah.accordionSummaryContent,expanded:ah.accordionSummaryExpanded},children:[(0,q.jsxs)(u.Z,{component:"h3",variant:"body1",children:[a+1,". ",(0,w.iF)(null!==(b=c.name[D.language])&& void 0!==b?b:"")]}),(0,q.jsxs)(u.Z,{variant:"caption",children:[A&&A[a]?j("\u8ECA\u8CBB")+": $"+A[a]:"",C&&C[a]?"\u3000\u3000\u3000\u3000"+j("\u5047\u65E5\u8ECA\u8CBB")+": $"+C[a]:""]})]}),(0,q.jsxs)(al,{classes:{root:ah.accordionDetailsRoot},children:[(0,q.jsx)(ac.Z,{containerClass:ah.accordionTimeReport,routeId:"".concat(n.toUpperCase()),seq:a}),(0,q.jsxs)("div",{style:{display:"flex"},children:[(0,q.jsx)(Z.Z,{"aria-label":"direction",onClick:function(){var a=c.location,b=a.lat,d=a.lng;window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(b,",").concat(d,"&travelmode=walking"))},style:{background:"transparent"},size:"large",children:(0,q.jsx)(_.Z,{})}),(0,q.jsx)(Z.Z,{"aria-label":"share",onClick:function(b){v({id:n,route:y,dest:z,idx:a,setIsCopied:F,stop:c,event:b})},style:{backgroundColor:"transparent"},size:"large",children:(0,q.jsx)(ad.Z,{})}),(0,q.jsx)(Z.Z,{"aria-label":"favourite",onClick:function(){return p("".concat(n.toUpperCase(),"/").concat(a))},style:{backgroundColor:"transparent"},size:"large",children:o.includes("".concat(n.toUpperCase(),"/").concat(a))?(0,q.jsx)(aa.Z,{}):(0,q.jsx)(ab.Z,{})})]})]})]},"stop-"+a)})},[z,e,A,C,m,D.language,n,y,o,v,d,l,j,p,]);return(0,q.jsxs)(ai,{className:s?ah.boxContainerEnergy:ah.boxContainer,children:[E,h&&(0,q.jsx)(af,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){ae(d,a,c[a])})}return d}({},h)),(0,q.jsx)($.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:1500,onClose:function(){F(!1)},message:j("\u5DF2\u8907\u88FD\u5230\u526A\u8CBC\u7C3F")})]})},b="stopAccordions",ah={boxContainer:"".concat(b,"-boxContainer"),boxContainerEnergy:"".concat(b,"-boxContainerEnergy"),accordionRoot:"".concat(b,"-accordion-root"),accordionExpanded:"".concat(b,"-accordion-expanded"),accordionSummaryRoot:"".concat(b,"-summary-root"),accordionSummaryContent:"".concat(b,"-summary-content"),accordionSummaryExpanded:"".concat(b,"-summary-expanded"),accordionDetailsRoot:"".concat(b,"-details-root"),accordionTimeReport:"".concat(b,"-accordionTimeReport")},ai=(0,c.ZP)(j.Z)(function(b){var a;return b.theme,ae(a={},"&.".concat(ah.boxContainer),{overflowY:"scroll"}),ae(a,"&.".concat(ah.boxContainerEnergy),{overflowY:"scroll"}),a}),aj=(0,c.ZP)(k.Z)(function(a){return a.theme,ae({},"&.".concat(ah.accordionRoot),ae({border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}},"&.".concat(ah.accordionExpanded),{margin:"auto"}))}),ak=(0,c.ZP)(l.Z)(function(c){var a,b=c.theme;return ae({},"&.".concat(ah.accordionSummaryRoot),(ae(a={backgroundColor:"dark"===b.palette.mode?b.palette.background.default:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:44},"&.".concat(ah.accordionSummaryExpanded),{minHeight:44}),ae(a,"& .".concat(ah.accordionSummaryContent),ae({margin:"8px 0",flexDirection:"column"},"&.".concat(ah.accordionSummaryExpanded),{margin:"8px 0"})),a))}),al=(0,c.ZP)(m.Z)(function(c){var b,a=c.theme;return ae(b={},"&.".concat(ah.accordionDetailsRoot),{display:"flex",alignItems:"center",paddingLeft:a.spacing(2),paddingRight:a.spacing(1),paddingTop:a.spacing(1),paddingBottom:a.spacing(1),justifyContent:"space-between"}),ae(b,"& .".concat(ah.accordionTimeReport),{flex:1}),b}),am=a(7645),an=a(6514),o=a(657),ao=a(4187),ap=a(9321);function aq(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ar(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function as(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||at(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(a,c){if(a){if("string"==typeof a)return aq(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aq(a,c)}}var f="stopDialog",au={root:"".concat(f,"-root"),title:"".concat(f,"-title")},av=(0,c.ZP)(o.Z)(function(c){var b,a=c.theme;return ar(b={},"&.".concat(au.root),{"& .MuiPaper-root":{width:"100%",marginTop:"90px",height:"calc(100vh - 100px)"}}),ar(b,"& .".concat(au.title),{backgroundColor:"dark"===a.palette.mode?a.palette.background.default:a.palette.primary.main,color:"dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary}),ar(b,"& .MuiDialogContent-root",{padding:0}),b}),aw=function(a){var b,c,i=a.open,d=a.stops,j=a.handleClose,e=(0,r.useContext)(B.Z),f=e.db,m=f.routeList,g=f.stopList,n=e.busSortOrder,k=(0,x.$)().i18n,h=(0,r.useState)([]),l=h[0],o=h[1];return(0,r.useEffect)(function(){if(void 0===d|| void 0===m){o([]);return}var a=[];Object.entries(m).sort(function(a,b){return(0,w.nO)(a,b,ap.Y$[n])}).forEach(function(c){var b=as(c,2),e=b[0],f=b[1];d.some(function(g){var c=as(g,2),b=c[0],d=c[1];return!!(f.stops[b]&&f.stops[b].includes(d))&&(a.push(e+"/"+f.stops[b].indexOf(d)),!0)})}),o(a)},[d]),(0,q.jsxs)(av,{open:i,onClose:j,className:au.root,children:[(0,q.jsx)(am.Z,{className:au.title,children:null!==(c=null===(b=null==g?void 0:g[d[0][1]].name)|| void 0===b?void 0:b[k.language])&& void 0!==c?c:""}),(0,q.jsx)(an.Z,{children:(0,q.jsx)(L.Z,{children:l.map(function(a){return(0,q.jsx)(ao.Z,{routeId:a},a)})})})]})},ax=a(6935),ay=h()(function(){return Promise.all([a.e(269),a.e(254)]).then(a.bind(a,4254))},{loadableGenerated:{webpack:function(){return[4254]}},ssr:!1}),az=function(b,c){for(var a=0;a<b.length;++a)if(b[a]in c)return c[b[a]];return[]},aA=function(d){var h,e=d.routeId,a=d.routeListEntry,f=d.stopsExtracted,z=d.dialogStop,j=d.panel,k=d.setPanel,b=(0,r.useContext)(B.Z),A=b.AppTitle,C=b.db,D=b.updateSelectedRoute,l=b.energyMode,E=b.workbox,F=b.geoPermission,Q=b.geolocation,m=a.route,G=a.stops,H=a.co,n=a.orig,i=a.dest,I=a.fares,c=0;if(void 0!==j)c=j;else if("granted"===F){var o=f.map(function(a,b){return[b,(0,w.Sp)(Q,a.location)]}).sort(function(a,b){return a[1]-b[1]})[0];c=o.length>0?o[0]:0}else c=0;var p=(0,r.useState)(!0),J=p[0],R=p[1],t=(0,r.useState)(!1),K=t[0],L=t[1],u=(0,x.$)(),v=u.t,g=u.i18n,y=(0,s.useRouter)(),M=(0,r.useCallback)(function(a,b){b&&c!==a&&k(a),y.replace("/".concat(g.language,"/route/").concat(e,"/#").concat(a)),c!==a||b?R(b):L(!0)},[c,y,g.language,e,k]),N=(0,r.useCallback)(function(a){c===a?L(!0):k(a),y.replace("/".concat(g.language,"/route/").concat(e,"/#").concat(a))},[c,y,g.language,e,k]),O=(0,r.useCallback)(function(){L(!1)},[L]);(0,r.useEffect)(function(){L(!1),document.getElementById(e).setAttribute("value",e),D(e)},[e,D]);var P=(0,r.useMemo)(function(){var a=I?I.filter(function(a,b,c){return c.indexOf(a)===b}).map(function(a){return"$".concat(a)}):[];return"zh"===g.language?"\u8DEF\u7DDA".concat(m)+"\u7531".concat(n.zh,"\u51FA\u767C\uFF0C\u4EE5").concat(i.zh,"\u70BA\u7D42\u9EDE\uFF0C")+(a.length?"\u5206\u6BB5\u8ECA\u8CBB\u70BA".concat(a.join("\u3001"),"\uFF0C"):"")+"\u9014\u7D93".concat(f.map(function(a){return a.name.zh}).join("\u3001"),"\u3002"):"Route ".concat(m," ")+"is from ".concat((0,w.iF)(n.en)," to ").concat((0,w.iF)(i.en))+(a.length?", section fees are ".concat(a.join(", "),". "):". ")+"Stops: "+(0,w.iF)(f.map(function(a){return a.name.en}).join(", "))+". "},[i.en,i.zh,I,g.language,n.en,n.zh,m,f,]);return(0,r.useEffect)(function(){if(!l&& void 0!==C.stopList){var a={type:"WARN_UP_MAP_CACHE",retinaDisplay:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zoomLevels:[14,15,16,17,18],stopList:az(H,G).map(function(a){return C.stopList[a]}).filter(function(a){return null!=a})};null==E||E.messageSW(a)}},[H,l,C.stopList,G,E]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ax.Z,{title:"".concat(m," ").concat(v("\u5F80")," ").concat((0,w.iF)(null!==(h=i[g.language])&& void 0!==h?h:"")," - ").concat(v(A)),description:P}),(0,q.jsx)("input",{hidden:!0,id:e}),(0,q.jsx)(X,{routeId:e,routeListEntry:a}),!l&&(0,q.jsx)(ay,{stops:f,stopIdx:c,onMarkerClick:N}),(0,q.jsx)(ag,{routeId:e,stopIdx:c,routeListEntry:a,stopListExtracted:f,expanded:J,handleChange:M}),(0,q.jsx)(aw,{open:K,stops:z,handleClose:O})]})};function aB(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var aC=!0,aD=function(a){var b=(0,r.useState)(a.panel),c=b[0],d=b[1];return(0,q.jsx)(aA,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){aB(d,a,c[a])})}return d}({},a,{panel:c,setPanel:d}))}},6935:function(d,b,a){"use strict";var e=a(5893),c=a(9008),f=a.n(c);b.Z=function(b){var a=b.title,c=b.description;return(0,e.jsxs)(f(),{children:[(0,e.jsx)("title",{children:a}),(0,e.jsx)("meta",{property:"og:title",content:a}),(0,e.jsx)("meta",{property:"og:description",content:c}),(0,e.jsx)("meta",{property:"og:type",content:"website"}),(0,e.jsx)("meta",{property:"og:url",content:"/"}),(0,e.jsx)("meta",{property:"og:image",content:"/share.png"}),(0,e.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,e.jsx)("meta",{name:"twitter:title",content:a}),(0,e.jsx)("meta",{name:"twitter:description",content:c}),(0,e.jsx)("meta",{name:"twitter:image",content:"/share.png"})]})}},6937:function(f,c,a){"use strict";a.d(c,{D:function(){return e},u:function(){return d}});var g=a(5893),b=a(7294),h=a(1458),i=a(8456);function j(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function k(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){j(d,a,c[a])})}return d}function l(a,d){if(null==a)return{};var b,c,e=m(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function m(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var d=b.forwardRef(function(a,c){var d=a.sx,b=a.color,e=l(a,["sx","color"]);return(0,g.jsx)(h.Z,k({color:null!=b?b:"inherit",sx:k({m:1,height:5,borderRadius:5},d),ref:c},e))});d.displayName="LinearProgress";var e=b.forwardRef(function(a,c){var d=a.sx,b=a.color,e=l(a,["sx","color"]);return(0,g.jsx)(i.Z,k({color:null!=b?b:"inherit",sx:k({m:1},d),ref:c},e))});e.displayName="CircularProgress"},8637:function(c,b,a){"use strict";var d=a(5893),e=a(7294),f=a(5861),g=a(1567),h=a(2970),i=a(1568),j=a(6937);b.Z=function(a){var b,l=a.routeId,m=a.seq,n=a.containerClass,o=void 0===n?"":n,p=a.showStopName,q=(0,g.$)(),s=q.t,t=q.i18n,r=(0,e.useContext)(h.Z),c=r.db,v=r.etaFormat,k=(0,i.e)("".concat(l,"/").concat(m));if(null==k)return(0,d.jsx)("div",{className:o,children:(0,d.jsx)(j.u,{})});var w=function(a){if(!a)return"";var b=Math.round((new Date(a).getTime()-new Date().getTime())/60/1e3);if(!Number.isInteger(b))return a.remark[t.language];var c=a.substr(11,5),d=b<1?"- ".concat(s("\u5206\u9418")):"".concat(b," ").concat(s("\u5206\u9418"));switch(v){case"exact":return c;case"diff":return d;default:return"".concat(c," (").concat(d,")")}},u=void 0!==c.routeList?Object.values(c.routeList[l].stops)[0][m]:0;return(0,d.jsxs)("div",{className:o,children:[void 0!==p&&p?(0,d.jsx)(f.Z,{variant:"caption",children:null===(b=c.stopList)|| void 0===b?void 0:b[u].name[t.language]}):null,0===k.length?s("\u672A\u6709\u73ED\u6B21\u8CC7\u6599"):k.map(function(a,b){return(0,d.jsxs)(f.Z,{variant:"subtitle1",children:[w(a.eta)," -"," ",a.remark[t.language]?a.remark[t.language]:""," ",s(a.co)]},"route-".concat(b))})]})}},287:function(c,a,b){"use strict";function d(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function e(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||f(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(a,c){if(a){if("string"==typeof a)return d(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return d(a,c)}}b.d(a,{HD:function(){return j},x4:function(){return k}});var g={"266":[0,0,1,1,1,0,0],"271":[0,1,1,1,1,0,0],"272":[0,0,0,0,0,1,0],"287":[0,1,1,1,1,1,0],"288":[0,0,0,0,0,0,1],"319":[0,1,1,1,1,1,1],"320":[1,0,0,0,0,0,0],"415":[0,1,1,1,1,1,0],"416":[1,0,0,0,0,0,1],"447":[0,1,1,1,1,1,1],"448":[1,0,0,0,0,0,0],"480":[1,0,0,0,0,0,1],"511":[1,1,1,1,1,1,1],"31":[0,1,1,1,1,1,0],"63":[0,1,1,1,1,1,1],"111":[1,1,0,1,1,1,1]},h=function(b,a){return 1440*b+(60*parseInt(a.slice(0,2),10)+parseInt(a.slice(2),10))},i=function(b,c,a){if(b-60<=a&&a<=c+60)return!0;var d=10080;return b-60<=a+d&&a+d<=c+60},j=function(b,a){return b.includes("".concat(a.getFullYear()).concat(("0"+(a.getMonth()+1)).slice(-2)).concat(("0"+a.getDate()).slice(-2)))},k=function(f,b,c){if(!b)return!0;var d=!1,a=new Date,j=h(c?0:a.getDay(),("0"+a.getHours()).slice(-2)+("0"+a.getMinutes()).slice(-2));return Object.entries(b).forEach(function(b){var a=e(b,2),c=a[0],k=a[1];try{g[c].forEach(function(a,b){a&&Object.entries(k).forEach(function(g){var a=e(g,2),c=a[0],f=a[1],k=h(b,c),l=h(b,f?f[0]:c);d=d||i(k,l,j)})})}catch(l){console.log(f+" has unknown service ID")}}),d}}},function(a){a.O(0,[40,481,152,14,826,440,36,187,774,888,179],function(){return a(a.s=5232)}),_N_E=a.O()}])