(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1334:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/search",function(){return c(1651)}])},1651:function(p,e,a){"use strict";a.r(e),a.d(e,{"__N_SSG":function(){return ae},"default":function(){return af}});var q=a(5893),r=a(7294),f=a(4051),g=a.n(f),h=a(5152),i=a.n(h),s=a(7357),t=a(5861),u=a(1519),j=a(5113),d=a(948),v=a(2970),w=a(101),x=a(1567),k=a(7954),y=a.n(k),l=a(6219),z=a(9492);function A(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function B(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function C(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||D(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(a,c){if(a){if("string"==typeof a)return A(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return A(a,c)}}var m,n,E=(n=(m=g().mark(function a(b,c){var d;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b){a.next=2;break}return a.abrupt("return",new Promise(function(a){return a([])}));case 2:return a.next=4,fetch("https://geodata.gov.hk/gs/api/v1.0.0/locationSearch?q=".concat(encodeURI(b)),c).then(function(a){return a.json()});case 4:return d=a.sent,a.abrupt("return",d.map(function(a){var b=C((0,z.Z)("+proj=tmerc +lat_0=22.31213333333334 +lon_0=114.1785555555556 +k=1 +x_0=836694.05 +y_0=819069.8 +ellps=intl +towgs84=-162.619,-276.959,-161.764,0.067753,-2.24365,-1.15883,-1.09425 +units=m +no_defs","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",[a.x,a.y]),2),c=b[0],d=b[1];return{address:{zh:a.addressZH,en:a.addressEN},name:{zh:a.nameZH,en:a.nameEN},lat:d,lng:c}}));case 6:case"end":return a.stop()}},a)}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=m.apply(a,b);function c(a){B(f,d,e,c,g,"next",a)}function g(a){B(f,d,e,c,g,"throw",a)}c(void 0)})}),function(a,b){return n.apply(this,arguments)}),F=function(a){var b=a.placeholder,d=a.onChange,g=a.stopList,e=a.value,c=(0,x.$)(),h=c.t,i=c.i18n,j=(0,r.useRef)(new AbortController),f=(0,r.useRef)(y()(function(a,b){var c=Object.values(g).filter(function(b){return b.name.zh.includes(a)||b.name.en.toLowerCase().includes(a.toLowerCase())}).map(function(a){return{label:"".concat(a.name[i.language]," - ").concat(h("\u8ECA\u7AD9")),location:a.location}}).slice(0,10);j.current.abort(),j.current=new AbortController,E(a,{signal:j.current.signal}).then(function(a){b(c.concat(a.map(function(a){var b=a.name,c=a.address,d=a.lat,e=a.lng;return{label:[b[i.language],c[i.language]].filter(function(a){return a}).join(" - "),location:{lat:d,lng:e}}})))})},200)).current;return(0,q.jsx)(G,{isClearable:!0,value:e,loadOptions:f,placeholder:void 0===b?"":b,onChange:d,classNamePrefix:"react-select"})},G=(0,d.ZP)(l.Z)(function(b){var a=b.theme;return{".react-select__control":{background:"".concat("dark"===a.palette.mode?a.palette.background.default:"white"," !important"),border:"none !important",borderRadius:"unset !important",borderBottom:"1px hsl(0, 0%, 80%) solid !important"},".react-select__input":{color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")},".react-select__valueContainer":{color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")},".react-select__single-value":{color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")},".react-select__option:hover":{filter:"grayscale(1) !important"},".react-select__option--is-focused":{background:"".concat("dark"===a.palette.mode?a.palette.background.default:"white"," !important")},".react-select__option--is-selected":{background:"".concat("dark"===a.palette.mode?a.palette.background.default:"white"," !important"),color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")},".react-select__menu":{background:"".concat("dark"===a.palette.mode?a.palette.background.default:"white"," !important"),color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")},".react-select__meauList":{background:"".concat("dark"===a.palette.mode?a.palette.background.default:"white"," !important"),color:"".concat("dark"===a.palette.mode?a.palette.primary.main:a.palette.text.primary," !important")}}}),H=a(8895),I=a(9953),J=a(2797),o=a(2280),K=a(2500),L=a(8637);function M(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var N=function(a){var b=a.routes,g=a.idx,h=a.handleRouteClick,e=a.expanded,i=a.stopIdx,f=(0,r.useContext)(v.Z),c=f.db,j=c.routeList,k=c.stopList,d=(0,x.$)(),l=d.t,m=d.i18n;return(0,q.jsxs)(P,{TransitionProps:{unmountOnExit:!0},classes:{root:O.root,expanded:O.expandedAccordion},onChange:function(){return h(g)},expanded:e,children:[(0,q.jsx)(H.Z,{classes:{root:O.summaryRoot,content:O.content,expanded:O.summaryExpanded},children:(0,q.jsx)(I.Z,{primary:b.map(function(b,c){var a=j[b.routeId],d=a.route,e=a.serviceType;return(0,q.jsxs)("span",{className:O.routeNo,children:[(0,q.jsx)(K.Z,{routeNo:d}),parseInt(e,10)>=2&&(0,q.jsx)(t.Z,{variant:"caption",className:O.specialTrip,children:l("\u7279\u5225\u73ED")})]},"search-".concat(g,"-").concat(c))}),secondary:function(a){var c=[];a.forEach(function(a){var f=a.routeId,b=a.on,d=j[f],e=d.fares,g=d.stops;c.push(k[Object.values(g).sort(function(a,b){return b.length-a.length})[0][b]].name[m.language]+(e?" ($".concat(e[b],")"):""))});var b=a[a.length-1],d=b.routeId,e=b.off,f=j[d].stops;return c.concat(k[Object.values(f).sort(function(a,b){return b.length-a.length})[0][e]].name[m.language]).join(" \u2192 ")}(b)})}),(0,q.jsx)(J.Z,{classes:{root:O.details},children:b.map(function(a,b){return(0,q.jsx)(L.Z,{routeId:a.routeId.toUpperCase(),seq:a.on+(i?i[b]:0),containerClass:O.timerReport,showStopName:!0},"timereport-".concat(g,"-").concat(b))})})]})},b="search-result",O={root:"".concat(b,"-root"),expandedAccordion:"".concat(b,"-expanded"),summaryRoot:"".concat(b,"-summary-root"),summaryExpanded:"".concat(b,"-summary-root-expanded"),content:"".concat(b,"-content"),details:"".concat(b,"-details"),timerReport:"".concat(b,"-timer-report"),routeNo:"".concat(b,"-route-no"),specialTrip:"".concat(b,"-special-trip")},P=(0,d.ZP)(o.Z)(function(c){var a,b=c.theme;return M(a={},"&.".concat(O.root),M({border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}},"&.".concat(O.expandedAccordion),{margin:"auto"})),M(a,"& .".concat(O.summaryRoot),M({backgroundColor:"dark"===b.palette.mode?b.palette.background.default:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:44},"&.".concat(O.summaryExpanded),{minHeight:44})),M(a,"& .".concat(O.content),M({margin:"8px 0",flexDirection:"column"},"&.".concat(O.summaryExpanded),{margin:"8px 0"})),M(a,"& .".concat(O.details),{padding:b.spacing(2),paddingTop:b.spacing(1),paddingBottom:b.spacing(1),display:"flex"}),M(a,"& .".concat(O.timerReport),{width:"50%"}),M(a,"& .".concat(O.routeNo),{width:"50%",display:"inline-block"}),M(a,"& .".concat(O.specialTrip),{fontSize:"0.6rem",marginLeft:"8px"}),a}),Q=a(8473),R=a(6935),S=a(6937);function T(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function U(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function V(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){U(g,e,f,d,h,"next",a)}function h(a){U(g,e,f,d,h,"throw",a)}d(void 0)})}}function W(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function X(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){W(d,a,c[a])})}return d}function Y(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||$(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(a){return function(a){if(Array.isArray(a))return T(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||$(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(a,c){if(a){if("string"==typeof a)return T(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return T(a,c)}}var _=i()(Promise.all([a.e(269),a.e(671)]).then(a.bind(a,6671)),{loadableGenerated:{webpack:function(){return[6671]}},ssr:!1}),aa=function(){var a=(0,x.$)().t;return(0,q.jsxs)("div",{className:ac.description,children:[(0,q.jsx)(t.Z,{variant:"h5",children:a("Route Search header")}),(0,q.jsx)(u.Z,{}),(0,q.jsx)(t.Z,{variant:"subtitle1",children:a("Route Search description")}),(0,q.jsx)("br",{}),(0,q.jsx)(t.Z,{variant:"body2",children:a("Route Search constraint")}),(0,q.jsxs)(t.Z,{variant:"body2",children:["1. ",a("Route Search caption 1")]}),(0,q.jsxs)(t.Z,{variant:"body2",children:["2. ",a("Route Search caption 2")]}),(0,q.jsxs)(t.Z,{variant:"body2",children:["3. ",a("Route Search caption 3")]})]})},ab=function(){var n,i=(0,x.$)(),d=i.t,t=i.i18n,e=(0,r.useContext)(v.Z),o=e.AppTitle,p=e.geolocation,j=e.energyMode,k=e.db,u=k.routeList,l=k.stopList,y=e.vibrateDuration,b=(0,r.useContext)(w.Z),c=b.locations,z=b.setLocations,h=b.status,A=b.setStatus,f=b.result,B=b.setResult,m=b.resultIdx,C=b.setResultIdx,D=(0,r.useRef)(void 0),E=function(){D.current&&(D.current.terminate(),D.current=void 0)},G=(n=V(g().mark(function b(d){var e,f,h;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return f=d.reduce(function(a,b){return(e=a).concat.apply(e,Z(b.map(function(a){return["".concat(a.routeId,"/").concat(a.on),"".concat(a.routeId,"/").concat(a.off),]})))},[]).filter(function(a,b,c){return c.indexOf(a)===b}),b.next=4,a.e(80).then(a.t.bind(a,9080,23)).then(function(a){return a.fetchEtas});case 4:h=b.sent,Promise.all(f.map(function(){var a=V(g().mark(function a(b){var c,d,e;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=(c=Y(b.split("/"),2))[0],e=c[1],navigator.onLine){a.next=5;break}a.t0=[],a.next=8;break;case 5:return a.next=7,h(X({},u[d],{seq:parseInt(e,10),routeStops:u[d].stops,co:Object.keys(u[d].stops),language:t.language}));case 7:a.t0=a.sent;case 8:return a.abrupt("return",a.t0);case 9:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}())).then(function(a){return f.filter(function(c,b){return!navigator.onLine||a[b].length&&a[b].reduce(function(a,b){return a||b.eta},null)})}).then(function(a){B(function(b){return Z(b).concat(Z(d.filter(function(b){return b.reduce(function(c,b){return c&&(-1!==a.indexOf("".concat(b.routeId,"/").concat(b.on))|| -1!==a.indexOf("".concat(b.routeId,"/").concat(b.off)))},!0)}).map(function(a){var b=c.start?c.start.location:p;return a.map(function(a,h){for(var d=Object.values(u[a.routeId].stops).sort(function(a,b){return b.length-a.length})[0],e=-1,f=1e5,c=a.on;c<a.off;++c){var g=(0,Q.Sp)(l[d[c]].location,b);g<f&&(e=c,f=g)}return b=l[d[a.off]].location,X({},a,{on:e})})}).map(function(a){return[a,a.reduce(function(b,a){return b+a.off-a.on},0),]}).sort(function(a,b){return a[1]-b[1]}).map(function(a){return a[0]})))})});case 6:case"end":return b.stop()}},b)})),function(a){return n.apply(this,arguments)});(0,r.useEffect)(function(){"rendering"===h&&A("ready")},[f]),(0,r.useEffect)(function(){return"waiting"===h&&c.end&&window.Worker&&(E(),D.current=new Worker("/search-worker.js"),D.current.postMessage({routeList:u,stopList:l,start:c.start?c.start.location:p,end:c.end.location,maxDepth:2}),D.current.onmessage=function(a){if("done"===a.data.type){E(),A(a.data.count?"rendering":"ready");return}G(a.data.value.sort(function(a,b){return a.length-b.length}))}),function(){E()}},[h,c]);var H=function(a){(0,Q.tp)(y),setTimeout(function(){C({resultIdx:a,stopIdx:[0,0]})},0)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(R.Z,{title:"".concat(d("\u9EDE\u5C0D\u9EDE\u8DEF\u7DDA\u641C\u5C0B")," - ").concat(d(o)),description:d("route-search-page-description")}),(0,q.jsxs)(ad,{className:ac.root,square:!0,elevation:0,children:[j?null:(0,q.jsx)(_,{start:c.start?c.start.location:p,end:c.end?c.end.location:null,routes:f[m.resultIdx],stopIdx:m.stopIdx,onMarkerClick:function(a,b){var c=f[m.resultIdx].map(function(a){return a.routeId}).indexOf(a);C(function(a){var d=Z(a.stopIdx);return d[c]=b,X({},a,{stopIdx:d})})}}),(0,q.jsxs)("div",{className:ac.inputContainer,children:[(0,q.jsx)(F,{value:c.start,placeholder:d("\u4F60\u7684\u4F4D\u7F6E"),onChange:function(a){z(X({},c,{start:a})),A("waiting"),C({resultIdx:0,stopIdx:[0,0]}),B([])},stopList:l}),(0,q.jsx)(F,{value:c.end,placeholder:d("\u76EE\u7684\u5730"),onChange:function(a){z(X({},c,{end:a})),a&&A("waiting"),C({resultIdx:0,stopIdx:[0,0]}),B([])},stopList:l})]}),(0,q.jsx)(s.Z,{className:j?ac.resultListEnergy:ac.resultList,children:c.end?"waiting|rendering".includes(h)&&0===f.length?(0,q.jsx)(S.u,{}):"ready|waiting|rendering".includes(h)&&f.length?f.map(function(b,a){return(0,q.jsx)(N,{routes:b,idx:a,handleRouteClick:H,expanded:a===m.resultIdx,stopIdx:a===m.resultIdx?m.stopIdx:null},"search-result-".concat(a))}):(0,q.jsx)(q.Fragment,{children:d("\u627E\u4E0D\u5230\u5408\u9069\u7684\u5DF4\u58EB\u8DEF\u7DDA")}):(0,q.jsx)(aa,{})})]})]})},c="search",ac={root:"".concat(c,"-root"),inputContainer:"".concat(c,"-input-container"),description:"".concat(c,"-description"),resultList:"".concat(c,"-result-list"),resultListEnergy:"".concat(c,"-result-list-energy")},ad=(0,d.ZP)(j.Z)(function(c){var a,b=c.theme;return W(a={},"&.".concat(ac.root),{background:"dark"===b.palette.mode?b.palette.background.default:"white",overflowY:"hidden",textAlign:"left",width:"100%"}),W(a,".search-input-container",{marginTop:"2%",padding:"0% 2%"}),W(a,".search-description",{textAlign:"left",marginTop:"5%",padding:"5%"}),W(a,".search-result-list",{overflowY:"scroll",height:"calc(100% - 30vh - 76px)"}),W(a,".search-result-list-energy",{overflowY:"scroll",height:"calc(100% - 76px)"}),a}),ae=!0,af=function(){return(0,q.jsx)(ab,{})}},6935:function(d,b,a){"use strict";var e=a(5893),c=a(9008),f=a.n(c);b.Z=function(b){var a=b.title,c=b.description;return(0,e.jsxs)(f(),{children:[(0,e.jsx)("title",{children:a}),(0,e.jsx)("meta",{property:"og:title",content:a}),(0,e.jsx)("meta",{property:"og:description",content:c}),(0,e.jsx)("meta",{property:"og:type",content:"website"}),(0,e.jsx)("meta",{property:"og:url",content:"/"}),(0,e.jsx)("meta",{property:"og:image",content:"/share.png"}),(0,e.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,e.jsx)("meta",{name:"twitter:title",content:a}),(0,e.jsx)("meta",{name:"twitter:description",content:c}),(0,e.jsx)("meta",{name:"twitter:image",content:"/share.png"})]})}},1568:function(d,b,a){"use strict";a.d(b,{e:function(){return m}});var c=a(4051),e=a.n(c),f=a(7294),g=a(1567),h=a(2970);function i(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function j(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function l(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}var m=function(m){var c,d,b,k,o=(0,f.useContext)(h.Z),r=o.db,s=o.isVisible,p=(b=m.split("/"),k=2,function(a){if(Array.isArray(a))return a}(b)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,k)||function(a,c){if(a){if("string"==typeof a)return i(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(a,c)}}(b,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=p[0],w=p[1],x=null!==(d=null===(c=r.routeList)|| void 0===c?void 0:c[t])&& void 0!==d?d:n,q=(0,f.useState)(null),u=q[0],y=q[1],v=(0,g.$)(),z=v.i18n.language;return(0,f.useEffect)(function(){var b,c,f=!0,d=(c=(b=e().mark(function b(){var c,d;return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s){b.next=3;break}return y(null),b.abrupt("return",[]);case 3:return b.next=5,a.e(80).then(a.t.bind(a,9080,23)).then(function(a){return a.fetchEtas});case 5:return c=b.sent,b.next=8,c(l({},x,{seq:parseInt(w,10),language:z}));case 8:d=b.sent,f&&y(d);case 10:case"end":return b.stop()}},b)}),function(){var a=this,c=arguments;return new Promise(function(e,f){var g=b.apply(a,c);function d(a){j(g,e,f,d,h,"next",a)}function h(a){j(g,e,f,d,h,"throw",a)}d(void 0)})}),function(){return c.apply(this,arguments)}),g=setInterval(function(){d()},3e4);return d(),function(){f=!1,clearInterval(g)}},[m,s]),u},n={co:[""],stops:{"":[""]},dest:{zh:"",en:""},bound:"",nlbId:0,gtfsId:"",fares:[],faresHoliday:[]}},6937:function(f,c,a){"use strict";a.d(c,{D:function(){return e},u:function(){return d}});var g=a(5893),b=a(7294),h=a(1458),i=a(8456);function j(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function k(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){j(d,a,c[a])})}return d}function l(a,d){if(null==a)return{};var b,c,e=m(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function m(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var d=b.forwardRef(function(a,c){var d=a.sx,b=a.color,e=l(a,["sx","color"]);return(0,g.jsx)(h.Z,k({color:null!=b?b:"inherit",sx:k({m:1,height:5,borderRadius:5},d),ref:c},e))});d.displayName="LinearProgress";var e=b.forwardRef(function(a,c){var d=a.sx,b=a.color,e=l(a,["sx","color"]);return(0,g.jsx)(i.Z,k({color:null!=b?b:"inherit",sx:k({m:1},d),ref:c},e))});e.displayName="CircularProgress"},2500:function(f,c,a){"use strict";var g=a(5893);a(7294);var d=a(5861),e=a(948);function h(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}c.Z=function(c){var a,d,b=c.routeNo,f=c.component,i=c.align,e=(a=b.match(/[A-Z]+$/)?[b.slice(0,-1),b.slice(-1)]:[b,""],d=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,d)||function(a,c){if(a){if("string"==typeof a)return h(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return h(a,c)}}(a,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=e[0],m=e[1];return(0,g.jsxs)(k,{component:f||"h2",align:i,variant:"caption",color:"textPrimary",className:j.root,children:[(0,g.jsx)("span",{className:j.prefix,children:l}),(0,g.jsx)("span",{className:j.suffix,children:m})]})};var b="routeNo",j={root:"".concat(b,"-root"),prefix:"".concat(b,"-prefix"),suffix:"".concat(b,"-suffix")},k=(0,e.ZP)(d.Z)(function(b){var a;return b.theme,i(a={},"&.".concat(j.root),{lineHeight:"normal",display:"inline"}),i(a,"& .".concat(j.prefix),{fontSize:"1.5rem",fontFamily:'"Oswald", sans-serif'}),i(a,"& .".concat(j.suffix),{fontSize:"1.2rem",fontFamily:'"Oswald", sans-serif'}),a})},8637:function(c,b,a){"use strict";var d=a(5893),e=a(7294),f=a(5861),g=a(1567),h=a(2970),i=a(1568),j=a(6937);b.Z=function(a){var b,l=a.routeId,m=a.seq,n=a.containerClass,o=void 0===n?"":n,p=a.showStopName,q=(0,g.$)(),s=q.t,t=q.i18n,r=(0,e.useContext)(h.Z),c=r.db,v=r.etaFormat,k=(0,i.e)("".concat(l,"/").concat(m));if(null==k)return(0,d.jsx)("div",{className:o,children:(0,d.jsx)(j.u,{})});var w=function(a){if(!a)return"";var b=Math.round((new Date(a).getTime()-new Date().getTime())/60/1e3);if(!Number.isInteger(b))return a.remark[t.language];var c=a.substr(11,5),d=b<1?"- ".concat(s("\u5206\u9418")):"".concat(b," ").concat(s("\u5206\u9418"));switch(v){case"exact":return c;case"diff":return d;default:return"".concat(c," (").concat(d,")")}},u=void 0!==c.routeList?Object.values(c.routeList[l].stops)[0][m]:0;return(0,d.jsxs)("div",{className:o,children:[void 0!==p&&p?(0,d.jsx)(f.Z,{variant:"caption",children:null===(b=c.stopList)|| void 0===b?void 0:b[u].name[t.language]}):null,0===k.length?s("\u672A\u6709\u73ED\u6B21\u8CC7\u6599"):k.map(function(a,b){return(0,d.jsxs)(f.Z,{variant:"subtitle1",children:[w(a.eta)," -"," ",a.remark[t.language]?a.remark[t.language]:""," ",s(a.co)]},"route-".concat(b))})]})}}},function(a){a.O(0,[40,152,14,440,34,774,888,179],function(){return a(a.s=1334)}),_N_E=a.O()}])